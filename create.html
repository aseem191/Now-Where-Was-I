<!DOCTYPE html>
<html>

<head>
	<title>Now where Was I?</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	

	<script>
		$(document).ready(function(){
			$(".myform").submit(function(event) {
				var serialized = $(this).serializeArray();
				event.preventDefault();

				var postdata = {
					thought: serialized[2].value,
					place: serialized[0].value.toLowerCase(),
					time: Number(serialized[1].value),
				}

				console.log( JSON.stringify(postdata) );

				if(serialized[2].value == "" || serialized[0].value == ""){
					return;
				}


				$.ajax({
					url: "https://desolate-castle-53665.herokuapp.com/postrequest",
					type: "POST",
					data: JSON.stringify(postdata),
					contentType: "application/json; charset=utf-8",
					dataType: "json",
					success: function(){
						console.log("posted");
					},
					complete: function(jqXHR, textStatus) {
						$("#successText").text("Submission complete")
					}
				})
			});
		})
		
	</script>

</head>
<body>
	<h1 align="center">Now where Was I?</h1>
	<br><br><br>

	<form class="myform">
		<div><input type="text" name="place"></div>
		<div><select name="time">
			<option value=-1>Any time</option>
			<option value=0>12 AM</option>
			<option value=1>1 AM</option>
			<option value=3>2 AM</option>
			<option value=4>3 AM</option>
			<option value=5>4 AM</option>
			<option value=6>5 AM</option>
			<option value=7>6 AM</option>
			<option value=8>7 AM</option>
			<option value=9>8 AM</option>
			<option value=10>9 AM</option>
			<option value=11>10 AM</option>
			<option value=12>11 AM</option>
			<option value=13>12 PM</option>
			<option value=14>1 PM</option>
			<option value=15>2 PM</option>
			<option value=16>3 PM</option>
			<option value=17>4 PM</option>
			<option value=18>5 PM</option>
			<option value=19>6 PM</option>
			<option value=20>7 PM</option>
			<option value=21>8 PM</option>
			<option value=22>9 PM</option>
			<option value=13>10 PM</option>
			<option value=24>11 PM</option>
		</select></div>
		<div><input type="text" name="thought"></div>
		<div><input type="submit" value="Submit"></div>
	</form>

	<h3 id="successText"></h3>
</body>
</html>