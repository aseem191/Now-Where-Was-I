<!DOCTYPE html>
<html>

<head>
	<title>Now where Was I?</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.js"></script>

	<script>
		$(document).ready(function(){
			$('#backButton').click(function() {
				window.location.href = 'index.html';
				return false;
			});

			$(".myform").submit(function(event) {
				var serialized = $(this).serializeArray();
				event.preventDefault();

				var postdata = {
					thought: serialized[2].value,
					place: serialized[0].value.toLowerCase(),
					time: Number(serialized[1].value),
				}

				console.log( JSON.stringify(postdata) );

				if(serialized[2].value == "" || serialized[0].value == ""){
					return;
				}


				$.ajax({
					url: "https://desolate-castle-53665.herokuapp.com/postrequest",
					type: "POST",
					data: JSON.stringify(postdata),
					contentType: "application/json; charset=utf-8",
					dataType: "json",
					success: function(){
						console.log("posted");
					},
					complete: function(jqXHR, textStatus) {
						$("#successText").text("Submission complete")
					}
				})
			});
		})
		
	</script>

</head>
<body>
	<br>
	<div style="padding-left: 25px;"><button class="ui button" id="backButton">
		Go back
	</button></div><br>
	<div align="center">
		<h1 align="center">Now where Was I?</h1>
		<br><br><br>

		<form class="myform">
			<h4>Enter the location where you came up with this realization:</h4>
			<div class="ui input"><input type="text" name="place"></div>
			<br><h4>Enter the time at which you came to this realization:</h4>
			<div><select class="ui dropdown" name="time">
				<option value=-1>Any time</option>
				<option value=0>12 AM</option>
				<option value=1>1 AM</option>
				<option value=3>2 AM</option>
				<option value=4>3 AM</option>
				<option value=5>4 AM</option>
				<option value=6>5 AM</option>
				<option value=7>6 AM</option>
				<option value=8>7 AM</option>
				<option value=9>8 AM</option>
				<option value=10>9 AM</option>
				<option value=11>10 AM</option>
				<option value=12>11 AM</option>
				<option value=13>12 PM</option>
				<option value=14>1 PM</option>
				<option value=15>2 PM</option>
				<option value=16>3 PM</option>
				<option value=17>4 PM</option>
				<option value=18>5 PM</option>
				<option value=19>6 PM</option>
				<option value=20>7 PM</option>
				<option value=21>8 PM</option>
				<option value=22>9 PM</option>
				<option value=13>10 PM</option>
				<option value=24>11 PM</option>
			</select></div>
			<br><h4>Enter your realization:</h4>
			<div class="ui input"><input type="text" name="thought"></div>
			<br><br>
			<div><input type="submit" value="Submit" class="ui button" ></div>
		</form>

		<h3 id="successText"></h3>

		<br><br>

		
	</div>
</body>
</html>